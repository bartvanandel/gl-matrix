/**
 * @fileoverview gl-matrix - High performance matrix and vector operations
 * @author Brandon Jones
 * @author Colin MacKenzie IV
 * @version 2.2.1
 */
/* Copyright (c) 2013, Brandon Jones, Colin MacKenzie IV. All rights reserved.

Redistribution and use in source and binary forms, with or without modification,
are permitted provided that the following conditions are met:

  * Redistributions of source code must retain the above copyright notice, this
    list of conditions and the following disclaimer.
  * Redistributions in binary form must reproduce the above copyright notice,
    this list of conditions and the following disclaimer in the documentation
    and/or other materials provided with the distribution.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR
ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
(INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON
ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE. */
(function(e){"use strict";var t={};typeof exports=="undefined"?typeof define=="function"&&typeof define.amd=="object"&&define.amd?(t.exports={},define(function(){return t.exports})):t.exports=typeof window!="undefined"?window:e:t.exports=exports,function(e){var t="undefined",n=", ",r=Math,i=r.abs,s=r.acos,o=r.cos,u=r.max,a=r.min,f=r.PI,l=r.random,c=r.sin,h=r.sqrt,p=r.tan,d=f/180,v=2*f,m=function(e){return e*e};if(!g)var g=1e-6;if(!y)var y=typeof Float32Array!==t?Float32Array:Array;if(!b)var b=l;var w={};w.setMatrixArrayType=function(e){y=e},typeof e!==t&&(e.glMatrix=w),w.toRadian=function(e){return e*d};var E={};E.create=function(){var e=new y(2);return e[0]=0,e[1]=0,e},E.clone=function(e){var t=new y(2);return t[0]=e[0],t[1]=e[1],t},E.fromValues=function(e,t){var n=new y(2);return n[0]=e,n[1]=t,n},E.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e},E.set=function(e,t,n){return e[0]=t,e[1]=n,e},E.add=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e},E.subtract=function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e},E.sub=E.subtract,E.multiply=function(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e},E.mul=E.multiply,E.divide=function(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e},E.div=E.divide,E.min=function(e,t,n){return e[0]=a(t[0],n[0]),e[1]=a(t[1],n[1]),e},E.max=function(e,t,n){return e[0]=u(t[0],n[0]),e[1]=u(t[1],n[1]),e},E.scale=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e},E.scaleAndAdd=function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e},E.distance=function(e,t){var n=t[0]-e[0],r=t[1]-e[1];return h(n*n+r*r)},E.dist=E.distance,E.squaredDistance=function(e,t){var n=t[0]-e[0],r=t[1]-e[1];return n*n+r*r},E.sqrDist=E.squaredDistance,E.length=function(e){var t=e[0],n=e[1];return h(t*t+n*n)},E.len=E.length,E.squaredLength=function(e){var t=e[0],n=e[1];return t*t+n*n},E.sqrLen=E.squaredLength,E.negate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e},E.inverse=function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e},E.normalize=function(e,t){var n=t[0],r=t[1],i=n*n+r*r;return i>0&&(i=1/h(i),e[0]=t[0]*i,e[1]=t[1]*i),e},E.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]},E.cross=function(e,t,n){var r=t[0]*n[1]-t[1]*n[0];return e[0]=e[1]=0,e[2]=r,e},E.lerp=function(e,t,n,r){var i=t[0],s=t[1];return e[0]=i+r*(n[0]-i),e[1]=s+r*(n[1]-s),e},E.random=function(e,t){t=t||1;var n=b()*v;return e[0]=o(n)*t,e[1]=c(n)*t,e},E.transformMat2=function(e,t,n){var r=t[0],i=t[1];return e[0]=n[0]*r+n[2]*i,e[1]=n[1]*r+n[3]*i,e},E.transformMat2d=function(e,t,n){var r=t[0],i=t[1];return e[0]=n[0]*r+n[2]*i+n[4],e[1]=n[1]*r+n[3]*i+n[5],e},E.transformMat3=function(e,t,n){var r=t[0],i=t[1];return e[0]=n[0]*r+n[3]*i+n[6],e[1]=n[1]*r+n[4]*i+n[7],e},E.transformMat4=function(e,t,n){var r=t[0],i=t[1];return e[0]=n[0]*r+n[4]*i+n[12],e[1]=n[1]*r+n[5]*i+n[13],e},E.forEach=function(){var e=E.create();return function(t,n,r,i,s,o){var u,f;n||(n=2),r||(r=0),i?f=a(i*n+r,t.length):f=t.length;for(u=r;u<f;u+=n)e[0]=t[u],e[1]=t[u+1],s(e,e,o),t[u]=e[0],t[u+1]=e[1];return t}}(),E.str=function(e){return"vec2("+e[0]+n+e[1]+")"},typeof e!==t&&(e.vec2=E);var S={};S.create=function(){var e=new y(3);return e[0]=0,e[1]=0,e[2]=0,e},S.clone=function(e){var t=new y(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},S.fromValues=function(e,t,n){var r=new y(3);return r[0]=e,r[1]=t,r[2]=n,r},S.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},S.set=function(e,t,n,r){return e[0]=t,e[1]=n,e[2]=r,e},S.add=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e},S.subtract=function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e},S.sub=S.subtract,S.multiply=function(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e},S.mul=S.multiply,S.divide=function(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e},S.div=S.divide,S.min=function(e,t,n){return e[0]=a(t[0],n[0]),e[1]=a(t[1],n[1]),e[2]=a(t[2],n[2]),e},S.max=function(e,t,n){return e[0]=u(t[0],n[0]),e[1]=u(t[1],n[1]),e[2]=u(t[2],n[2]),e},S.scale=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e},S.scaleAndAdd=function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e},S.distance=function(e,t){var n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2];return h(n*n+r*r+i*i)},S.dist=S.distance,S.squaredDistance=function(e,t){var n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2];return n*n+r*r+i*i},S.sqrDist=S.squaredDistance,S.length=function(e){var t=e[0],n=e[1],r=e[2];return h(t*t+n*n+r*r)},S.len=S.length,S.squaredLength=function(e){var t=e[0],n=e[1],r=e[2];return t*t+n*n+r*r},S.sqrLen=S.squaredLength,S.negate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e},S.inverse=function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e},S.normalize=function(e,t){var n=t[0],r=t[1],i=t[2],s=n*n+r*r+i*i;return s>0&&(s=1/h(s),e[0]=t[0]*s,e[1]=t[1]*s,e[2]=t[2]*s),e},S.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]},S.cross=function(e,t,n){var r=t[0],i=t[1],s=t[2],o=n[0],u=n[1],a=n[2];return e[0]=i*a-s*u,e[1]=s*o-r*a,e[2]=r*u-i*o,e},S.lerp=function(e,t,n,r){var i=t[0],s=t[1],o=t[2];return e[0]=i+r*(n[0]-i),e[1]=s+r*(n[1]-s),e[2]=o+r*(n[2]-o),e},S.random=function(e,t){t=t||1;var n=b()*v,r=b()*2-1,i=h(1-r*r)*t;return e[0]=o(n)*i,e[1]=c(n)*i,e[2]=r*t,e},S.transformMat4=function(e,t,n){var r=t[0],i=t[1],s=t[2],o=n[3]*r+n[7]*i+n[11]*s+n[15];return o=o||1,e[0]=(n[0]*r+n[4]*i+n[8]*s+n[12])/o,e[1]=(n[1]*r+n[5]*i+n[9]*s+n[13])/o,e[2]=(n[2]*r+n[6]*i+n[10]*s+n[14])/o,e},S.transformMat3=function(e,t,n){var r=t[0],i=t[1],s=t[2];return e[0]=r*n[0]+i*n[3]+s*n[6],e[1]=r*n[1]+i*n[4]+s*n[7],e[2]=r*n[2]+i*n[5]+s*n[8],e},S.transformQuat=function(e,t,n){var r=t[0],i=t[1],s=t[2],o=n[0],u=n[1],a=n[2],f=n[3],l=f*r+u*s-a*i,c=f*i+a*r-o*s,h=f*s+o*i-u*r,p=-o*r-u*i-a*s;return e[0]=l*f+p*-o+c*-a-h*-u,e[1]=c*f+p*-u+h*-o-l*-a,e[2]=h*f+p*-a+l*-u-c*-o,e},S.rotateX=function(e,t,n,r){var i=[],s=[];return i[0]=t[0]-n[0],i[1]=t[1]-n[1],i[2]=t[2]-n[2],s[0]=i[0],s[1]=i[1]*o(r)-i[2]*c(r),s[2]=i[1]*c(r)+i[2]*o(r),e[0]=s[0]+n[0],e[1]=s[1]+n[1],e[2]=s[2]+n[2],e},S.rotateY=function(e,t,n,r){var i=[],s=[];return i[0]=t[0]-n[0],i[1]=t[1]-n[1],i[2]=t[2]-n[2],s[0]=i[2]*c(r)+i[0]*o(r),s[1]=i[1],s[2]=i[2]*o(r)-i[0]*c(r),e[0]=s[0]+n[0],e[1]=s[1]+n[1],e[2]=s[2]+n[2],e},S.rotateZ=function(e,t,n,r){var i=[],s=[];return i[0]=t[0]-n[0],i[1]=t[1]-n[1],i[2]=t[2]-n[2],s[0]=i[0]*o(r)-i[1]*c(r),s[1]=i[0]*c(r)+i[1]*o(r),s[2]=i[2],e[0]=s[0]+n[0],e[1]=s[1]+n[1],e[2]=s[2]+n[2],e},S.forEach=function(){var e=S.create();return function(t,n,r,i,s,o){var u,f;n||(n=3),r||(r=0),i?f=a(i*n+r,t.length):f=t.length;for(u=r;u<f;u+=n)e[0]=t[u],e[1]=t[u+1],e[2]=t[u+2],s(e,e,o),t[u]=e[0],t[u+1]=e[1],t[u+2]=e[2];return t}}(),S.str=function(e){return"vec3("+e[0]+n+e[1]+n+e[2]+")"},typeof e!==t&&(e.vec3=S);var x={};x.create=function(){var e=new y(4);return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e},x.clone=function(e){var t=new y(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},x.fromValues=function(e,t,n,r){var i=new y(4);return i[0]=e,i[1]=t,i[2]=n,i[3]=r,i},x.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},x.set=function(e,t,n,r,i){return e[0]=t,e[1]=n,e[2]=r,e[3]=i,e},x.add=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e},x.subtract=function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e},x.sub=x.subtract,x.multiply=function(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e[3]=t[3]*n[3],e},x.mul=x.multiply,x.divide=function(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e[3]=t[3]/n[3],e},x.div=x.divide,x.min=function(e,t,n){return e[0]=a(t[0],n[0]),e[1]=a(t[1],n[1]),e[2]=a(t[2],n[2]),e[3]=a(t[3],n[3]),e},x.max=function(e,t,n){return e[0]=u(t[0],n[0]),e[1]=u(t[1],n[1]),e[2]=u(t[2],n[2]),e[3]=u(t[3],n[3]),e},x.scale=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e},x.scaleAndAdd=function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e},x.distance=function(e,t){var n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2],s=t[3]-e[3];return h(n*n+r*r+i*i+s*s)},x.dist=x.distance,x.squaredDistance=function(e,t){var n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2],s=t[3]-e[3];return n*n+r*r+i*i+s*s},x.sqrDist=x.squaredDistance,x.length=function(e){var t=e[0],n=e[1],r=e[2],i=e[3];return h(t*t+n*n+r*r+i*i)},x.len=x.length,x.squaredLength=function(e){var t=e[0],n=e[1],r=e[2],i=e[3];return t*t+n*n+r*r+i*i},x.sqrLen=x.squaredLength,x.negate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e},x.inverse=function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e[3]=1/t[3],e},x.normalize=function(e,t){var n=t[0],r=t[1],i=t[2],s=t[3],o=n*n+r*r+i*i+s*s;return o>0&&(o=1/h(o),e[0]=t[0]*o,e[1]=t[1]*o,e[2]=t[2]*o,e[3]=t[3]*o),e},x.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]},x.lerp=function(e,t,n,r){var i=t[0],s=t[1],o=t[2],u=t[3];return e[0]=i+r*(n[0]-i),e[1]=s+r*(n[1]-s),e[2]=o+r*(n[2]-o),e[3]=u+r*(n[3]-u),e},x.random=function(e,t){return t=t||1,e[0]=b(),e[1]=b(),e[2]=b(),e[3]=b(),x.normalize(e,e),x.scale(e,e,t),e},x.transformMat4=function(e,t,n){var r=t[0],i=t[1],s=t[2],o=t[3];return e[0]=n[0]*r+n[4]*i+n[8]*s+n[12]*o,e[1]=n[1]*r+n[5]*i+n[9]*s+n[13]*o,e[2]=n[2]*r+n[6]*i+n[10]*s+n[14]*o,e[3]=n[3]*r+n[7]*i+n[11]*s+n[15]*o,e},x.transformQuat=function(e,t,n){var r=t[0],i=t[1],s=t[2],o=n[0],u=n[1],a=n[2],f=n[3],l=f*r+u*s-a*i,c=f*i+a*r-o*s,h=f*s+o*i-u*r,p=-o*r-u*i-a*s;return e[0]=l*f+p*-o+c*-a-h*-u,e[1]=c*f+p*-u+h*-o-l*-a,e[2]=h*f+p*-a+l*-u-c*-o,e},x.forEach=function(){var e=x.create();return function(t,n,r,i,s,o){var u,f;n||(n=4),r||(r=0),i?f=a(i*n+r,t.length):f=t.length;for(u=r;u<f;u+=n)e[0]=t[u],e[1]=t[u+1],e[2]=t[u+2],e[3]=t[u+3],s(e,e,o),t[u]=e[0],t[u+1]=e[1],t[u+2]=e[2],t[u+3]=e[3];return t}}(),x.str=function(e){return"vec4("+e[0]+n+e[1]+n+e[2]+n+e[3]+")"},typeof e!==t&&(e.vec4=x);var T={};T.create=function(){var e=new y(4);return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e},T.clone=function(e){var t=new y(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},T.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},T.identity=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e},T.transpose=function(e,t){if(e===t){var n=t[1];e[1]=t[2],e[2]=n}else e[0]=t[0],e[1]=t[2],e[2]=t[1],e[3]=t[3];return e},T.invert=function(e,t){var n=t[0],r=t[1],i=t[2],s=t[3],o=n*s-i*r;return o?(o=1/o,e[0]=s*o,e[1]=-r*o,e[2]=-i*o,e[3]=n*o,e):null},T.adjoint=function(e,t){var n=t[0];return e[0]=t[3],e[1]=-t[1],e[2]=-t[2],e[3]=n,e},T.determinant=function(e){return e[0]*e[3]-e[2]*e[1]},T.multiply=function(e,t,n){var r=t[0],i=t[1],s=t[2],o=t[3],u=n[0],a=n[1],f=n[2],l=n[3];return e[0]=r*u+s*a,e[1]=i*u+o*a,e[2]=r*f+s*l,e[3]=i*f+o*l,e},T.mul=T.multiply,T.rotate=function(e,t,n){var r=t[0],i=t[1],s=t[2],u=t[3],a=c(n),f=o(n);return e[0]=r*f+s*a,e[1]=i*f+u*a,e[2]=r*-a+s*f,e[3]=i*-a+u*f,e},T.scale=function(e,t,n){var r=t[0],i=t[1],s=t[2],o=t[3],u=n[0],a=n[1];return e[0]=r*u,e[1]=i*u,e[2]=s*a,e[3]=o*a,e},T.str=function(e){return"mat2("+e[0]+n+e[1]+n+e[2]+n+e[3]+")"},T.frob=function(e){return h(m(e[0])+m(e[1])+m(e[2])+m(e[3]))},T.LDU=function(e,t,n,r){return e[2]=r[2]/r[0],n[0]=r[0],n[1]=r[1],n[3]=r[3]-e[2]*n[1],[e,t,n]},typeof e!==t&&(e.mat2=T);var N={};N.create=function(){var e=new y(6);return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e},N.clone=function(e){var t=new y(6);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t},N.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e},N.identity=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e},N.invert=function(e,t){var n=t[0],r=t[1],i=t[2],s=t[3],o=t[4],u=t[5],a=n*s-r*i;return a?(a=1/a,e[0]=s*a,e[1]=-r*a,e[2]=-i*a,e[3]=n*a,e[4]=(i*u-s*o)*a,e[5]=(r*o-n*u)*a,e):null},N.determinant=function(e){return e[0]*e[3]-e[1]*e[2]},N.multiply=function(e,t,n){var r=t[0],i=t[1],s=t[2],o=t[3],u=t[4],a=t[5],f=n[0],l=n[1],c=n[2],h=n[3],p=n[4],d=n[5];return e[0]=r*f+s*l,e[1]=i*f+o*l,e[2]=r*c+s*h,e[3]=i*c+o*h,e[4]=r*p+s*d+u,e[5]=i*p+o*d+a,e},N.mul=N.multiply,N.rotate=function(e,t,n){var r=t[0],i=t[1],s=t[2],u=t[3],a=t[4],f=t[5],l=c(n),h=o(n);return e[0]=r*h+s*l,e[1]=i*h+u*l,e[2]=r*-l+s*h,e[3]=i*-l+u*h,e[4]=a,e[5]=f,e},N.scale=function(e,t,n){var r=t[0],i=t[1],s=t[2],o=t[3],u=t[4],a=t[5],f=n[0],l=n[1];return e[0]=r*f,e[1]=i*f,e[2]=s*l,e[3]=o*l,e[4]=u,e[5]=a,e},N.translate=function(e,t,n){var r=t[0],i=t[1],s=t[2],o=t[3],u=t[4],a=t[5],f=n[0],l=n[1];return e[0]=r,e[1]=i,e[2]=s,e[3]=o,e[4]=r*f+s*l+u,e[5]=i*f+o*l+a,e},N.str=function(e){return"mat2d("+e[0]+n+e[1]+n+e[2]+n+e[3]+n+e[4]+n+e[5]+")"},N.frob=function(e){return h(m(e[0])+m(e[1])+m(e[2])+m(e[3])+m(e[4])+m(e[5])+1)},typeof e!==t&&(e.mat2d=N);var C={};C.create=function(){var e=new y(9);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},C.fromMat4=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e},C.clone=function(e){var t=new y(9);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},C.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},C.identity=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},C.transpose=function(e,t){if(e===t){var n=t[1],r=t[2],i=t[5];e[1]=t[3],e[2]=t[6],e[3]=n,e[5]=t[7],e[6]=r,e[7]=i}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e},C.invert=function(e,t){var n=t[0],r=t[1],i=t[2],s=t[3],o=t[4],u=t[5],a=t[6],f=t[7],l=t[8],c=l*o-u*f,h=-l*s+u*a,p=f*s-o*a,d=n*c+r*h+i*p;return d?(d=1/d,e[0]=c*d,e[1]=(-l*r+i*f)*d,e[2]=(u*r-i*o)*d,e[3]=h*d,e[4]=(l*n-i*a)*d,e[5]=(-u*n+i*s)*d,e[6]=p*d,e[7]=(-f*n+r*a)*d,e[8]=(o*n-r*s)*d,e):null},C.adjoint=function(e,t){var n=t[0],r=t[1],i=t[2],s=t[3],o=t[4],u=t[5],a=t[6],f=t[7],l=t[8];return e[0]=o*l-u*f,e[1]=i*f-r*l,e[2]=r*u-i*o,e[3]=u*a-s*l,e[4]=n*l-i*a,e[5]=i*s-n*u,e[6]=s*f-o*a,e[7]=r*a-n*f,e[8]=n*o-r*s,e},C.determinant=function(e){var t=e[0],n=e[1],r=e[2],i=e[3],s=e[4],o=e[5],u=e[6],a=e[7],f=e[8];return t*(f*s-o*a)+n*(-f*i+o*u)+r*(a*i-s*u)},C.multiply=function(e,t,n){var r=t[0],i=t[1],s=t[2],o=t[3],u=t[4],a=t[5],f=t[6],l=t[7],c=t[8],h=n[0],p=n[1],d=n[2],v=n[3],m=n[4],g=n[5],y=n[6],b=n[7],w=n[8];return e[0]=h*r+p*o+d*f,e[1]=h*i+p*u+d*l,e[2]=h*s+p*a+d*c,e[3]=v*r+m*o+g*f,e[4]=v*i+m*u+g*l,e[5]=v*s+m*a+g*c,e[6]=y*r+b*o+w*f,e[7]=y*i+b*u+w*l,e[8]=y*s+b*a+w*c,e},C.mul=C.multiply,C.translate=function(e,t,n){var r=t[0],i=t[1],s=t[2],o=t[3],u=t[4],a=t[5],f=t[6],l=t[7],c=t[8],h=n[0],p=n[1];return e[0]=r,e[1]=i,e[2]=s,e[3]=o,e[4]=u,e[5]=a,e[6]=h*r+p*o+f,e[7]=h*i+p*u+l,e[8]=h*s+p*a+c,e},C.rotate=function(e,t,n){var r=t[0],i=t[1],s=t[2],u=t[3],a=t[4],f=t[5],l=t[6],h=t[7],p=t[8],d=c(n),v=o(n);return e[0]=v*r+d*u,e[1]=v*i+d*a,e[2]=v*s+d*f,e[3]=v*u-d*r,e[4]=v*a-d*i,e[5]=v*f-d*s,e[6]=l,e[7]=h,e[8]=p,e},C.scale=function(e,t,n){var r=n[0],i=n[1];return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=i*t[3],e[4]=i*t[4],e[5]=i*t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},C.fromMat2d=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=0,e[3]=t[2],e[4]=t[3],e[5]=0,e[6]=t[4],e[7]=t[5],e[8]=1,e},C.fromQuat=function(e,t){var n=t[0],r=t[1],i=t[2],s=t[3],o=n+n,u=r+r,a=i+i,f=n*o,l=r*o,c=r*u,h=i*o,p=i*u,d=i*a,v=s*o,m=s*u,g=s*a;return e[0]=1-c-d,e[3]=l-g,e[6]=h+m,e[1]=l+g,e[4]=1-f-d,e[7]=p-v,e[2]=h-m,e[5]=p+v,e[8]=1-f-c,e},C.normalFromMat4=function(e,t){var n=t[0],r=t[1],i=t[2],s=t[3],o=t[4],u=t[5],a=t[6],f=t[7],l=t[8],c=t[9],h=t[10],p=t[11],d=t[12],v=t[13],m=t[14],g=t[15],y=n*u-r*o,b=n*a-i*o,w=n*f-s*o,E=r*a-i*u,S=r*f-s*u,x=i*f-s*a,T=l*v-c*d,N=l*m-h*d,C=l*g-p*d,k=c*m-h*v,L=c*g-p*v,A=h*g-p*m,O=y*A-b*L+w*k+E*C-S*N+x*T;return O?(O=1/O,e[0]=(u*A-a*L+f*k)*O,e[1]=(a*C-o*A-f*N)*O,e[2]=(o*L-u*C+f*T)*O,e[3]=(i*L-r*A-s*k)*O,e[4]=(n*A-i*C+s*N)*O,e[5]=(r*C-n*L-s*T)*O,e[6]=(v*x-m*S+g*E)*O,e[7]=(m*w-d*x-g*b)*O,e[8]=(d*S-v*w+g*y)*O,e):null},C.str=function(e){return"mat3("+e[0]+n+e[1]+n+e[2]+n+e[3]+n+e[4]+n+e[5]+n+e[6]+n+e[7]+n+e[8]+")"},C.frob=function(e){return h(m(e[0])+m(e[1])+m(e[2])+m(e[3])+m(e[4])+m(e[5])+m(e[6])+m(e[7])+m(e[8]))},typeof e!==t&&(e.mat3=C);var k={};k.create=function(){var e=new y(16);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},k.clone=function(e){var t=new y(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},k.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},k.identity=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},k.transpose=function(e,t){if(e===t){var n=t[1],r=t[2],i=t[3],s=t[6],o=t[7],u=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=n,e[6]=t[9],e[7]=t[13],e[8]=r,e[9]=s,e[11]=t[14],e[12]=i,e[13]=o,e[14]=u}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e},k.invert=function(e,t){var n=t[0],r=t[1],i=t[2],s=t[3],o=t[4],u=t[5],a=t[6],f=t[7],l=t[8],c=t[9],h=t[10],p=t[11],d=t[12],v=t[13],m=t[14],g=t[15],y=n*u-r*o,b=n*a-i*o,w=n*f-s*o,E=r*a-i*u,S=r*f-s*u,x=i*f-s*a,T=l*v-c*d,N=l*m-h*d,C=l*g-p*d,k=c*m-h*v,L=c*g-p*v,A=h*g-p*m,O=y*A-b*L+w*k+E*C-S*N+x*T;return O?(O=1/O,e[0]=(u*A-a*L+f*k)*O,e[1]=(i*L-r*A-s*k)*O,e[2]=(v*x-m*S+g*E)*O,e[3]=(h*S-c*x-p*E)*O,e[4]=(a*C-o*A-f*N)*O,e[5]=(n*A-i*C+s*N)*O,e[6]=(m*w-d*x-g*b)*O,e[7]=(l*x-h*w+p*b)*O,e[8]=(o*L-u*C+f*T)*O,e[9]=(r*C-n*L-s*T)*O,e[10]=(d*S-v*w+g*y)*O,e[11]=(c*w-l*S-p*y)*O,e[12]=(u*N-o*k-a*T)*O,e[13]=(n*k-r*N+i*T)*O,e[14]=(v*b-d*E-m*y)*O,e[15]=(l*E-c*b+h*y)*O,e):null},k.adjoint=function(e,t){var n=t[0],r=t[1],i=t[2],s=t[3],o=t[4],u=t[5],a=t[6],f=t[7],l=t[8],c=t[9],h=t[10],p=t[11],d=t[12],v=t[13],m=t[14],g=t[15];return e[0]=u*(h*g-p*m)-c*(a*g-f*m)+v*(a*p-f*h),e[1]=-(r*(h*g-p*m)-c*(i*g-s*m)+v*(i*p-s*h)),e[2]=r*(a*g-f*m)-u*(i*g-s*m)+v*(i*f-s*a),e[3]=-(r*(a*p-f*h)-u*(i*p-s*h)+c*(i*f-s*a)),e[4]=-(o*(h*g-p*m)-l*(a*g-f*m)+d*(a*p-f*h)),e[5]=n*(h*g-p*m)-l*(i*g-s*m)+d*(i*p-s*h),e[6]=-(n*(a*g-f*m)-o*(i*g-s*m)+d*(i*f-s*a)),e[7]=n*(a*p-f*h)-o*(i*p-s*h)+l*(i*f-s*a),e[8]=o*(c*g-p*v)-l*(u*g-f*v)+d*(u*p-f*c),e[9]=-(n*(c*g-p*v)-l*(r*g-s*v)+d*(r*p-s*c)),e[10]=n*(u*g-f*v)-o*(r*g-s*v)+d*(r*f-s*u),e[11]=-(n*(u*p-f*c)-o*(r*p-s*c)+l*(r*f-s*u)),e[12]=-(o*(c*m-h*v)-l*(u*m-a*v)+d*(u*h-a*c)),e[13]=n*(c*m-h*v)-l*(r*m-i*v)+d*(r*h-i*c),e[14]=-(n*(u*m-a*v)-o*(r*m-i*v)+d*(r*a-i*u)),e[15]=n*(u*h-a*c)-o*(r*h-i*c)+l*(r*a-i*u),e},k.determinant=function(e){var t=e[0],n=e[1],r=e[2],i=e[3],s=e[4],o=e[5],u=e[6],a=e[7],f=e[8],l=e[9],c=e[10],h=e[11],p=e[12],d=e[13],v=e[14],m=e[15],g=t*o-n*s,y=t*u-r*s,b=t*a-i*s,w=n*u-r*o,E=n*a-i*o,S=r*a-i*u,x=f*d-l*p,T=f*v-c*p,N=f*m-h*p,C=l*v-c*d,k=l*m-h*d,L=c*m-h*v;return g*L-y*k+b*C+w*N-E*T+S*x},k.multiply=function(e,t,n){var r=t[0],i=t[1],s=t[2],o=t[3],u=t[4],a=t[5],f=t[6],l=t[7],c=t[8],h=t[9],p=t[10],d=t[11],v=t[12],m=t[13],g=t[14],y=t[15],b=n[0],w=n[1],E=n[2],S=n[3];return e[0]=b*r+w*u+E*c+S*v,e[1]=b*i+w*a+E*h+S*m,e[2]=b*s+w*f+E*p+S*g,e[3]=b*o+w*l+E*d+S*y,b=n[4],w=n[5],E=n[6],S=n[7],e[4]=b*r+w*u+E*c+S*v,e[5]=b*i+w*a+E*h+S*m,e[6]=b*s+w*f+E*p+S*g,e[7]=b*o+w*l+E*d+S*y,b=n[8],w=n[9],E=n[10],S=n[11],e[8]=b*r+w*u+E*c+S*v,e[9]=b*i+w*a+E*h+S*m,e[10]=b*s+w*f+E*p+S*g,e[11]=b*o+w*l+E*d+S*y,b=n[12],w=n[13],E=n[14],S=n[15],e[12]=b*r+w*u+E*c+S*v,e[13]=b*i+w*a+E*h+S*m,e[14]=b*s+w*f+E*p+S*g,e[15]=b*o+w*l+E*d+S*y,e},k.mul=k.multiply,k.translate=function(e,t,n){var r=n[0],i=n[1],s=n[2],o,u,a,f,l,c,h,p,d,v,m,g;return t===e?(e[12]=t[0]*r+t[4]*i+t[8]*s+t[12],e[13]=t[1]*r+t[5]*i+t[9]*s+t[13],e[14]=t[2]*r+t[6]*i+t[10]*s+t[14],e[15]=t[3]*r+t[7]*i+t[11]*s+t[15]):(o=t[0],u=t[1],a=t[2],f=t[3],l=t[4],c=t[5],h=t[6],p=t[7],d=t[8],v=t[9],m=t[10],g=t[11],e[0]=o,e[1]=u,e[2]=a,e[3]=f,e[4]=l,e[5]=c,e[6]=h,e[7]=p,e[8]=d,e[9]=v,e[10]=m,e[11]=g,e[12]=o*r+l*i+d*s+t[12],e[13]=u*r+c*i+v*s+t[13],e[14]=a*r+h*i+m*s+t[14],e[15]=f*r+p*i+g*s+t[15]),e},k.scale=function(e,t,n){var r=n[0],i=n[1],s=n[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*s,e[9]=t[9]*s,e[10]=t[10]*s,e[11]=t[11]*s,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},k.rotate=function(e,t,n,r){var s=r[0],u=r[1],a=r[2],f=h(s*s+u*u+a*a),l,p,d,v,m,y,b,w,E,S,x,T,N,C,k,L,A,O,M,_,D,P,H,B;return i(f)<g?null:(f=1/f,s*=f,u*=f,a*=f,l=c(n),p=o(n),d=1-p,v=t[0],m=t[1],y=t[2],b=t[3],w=t[4],E=t[5],S=t[6],x=t[7],T=t[8],N=t[9],C=t[10],k=t[11],L=s*s*d+p,A=u*s*d+a*l,O=a*s*d-u*l,M=s*u*d-a*l,_=u*u*d+p,D=a*u*d+s*l,P=s*a*d+u*l,H=u*a*d-s*l,B=a*a*d+p,e[0]=v*L+w*A+T*O,e[1]=m*L+E*A+N*O,e[2]=y*L+S*A+C*O,e[3]=b*L+x*A+k*O,e[4]=v*M+w*_+T*D,e[5]=m*M+E*_+N*D,e[6]=y*M+S*_+C*D,e[7]=b*M+x*_+k*D,e[8]=v*P+w*H+T*B,e[9]=m*P+E*H+N*B,e[10]=y*P+S*H+C*B,e[11]=b*P+x*H+k*B,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)},k.rotateX=function(e,t,n){var r=c(n),i=o(n),s=t[4],u=t[5],a=t[6],f=t[7],l=t[8],h=t[9],p=t[10],d=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=s*i+l*r,e[5]=u*i+h*r,e[6]=a*i+p*r,e[7]=f*i+d*r,e[8]=l*i-s*r,e[9]=h*i-u*r,e[10]=p*i-a*r,e[11]=d*i-f*r,e},k.rotateY=function(e,t,n){var r=c(n),i=o(n),s=t[0],u=t[1],a=t[2],f=t[3],l=t[8],h=t[9],p=t[10],d=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=s*i-l*r,e[1]=u*i-h*r,e[2]=a*i-p*r,e[3]=f*i-d*r,e[8]=s*r+l*i,e[9]=u*r+h*i,e[10]=a*r+p*i,e[11]=f*r+d*i,e},k.rotateZ=function(e,t,n){var r=c(n),i=o(n),s=t[0],u=t[1],a=t[2],f=t[3],l=t[4],h=t[5],p=t[6],d=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=s*i+l*r,e[1]=u*i+h*r,e[2]=a*i+p*r,e[3]=f*i+d*r,e[4]=l*i-s*r,e[5]=h*i-u*r,e[6]=p*i-a*r,e[7]=d*i-f*r,e},k.fromRotationTranslation=function(e,t,n){var r=t[0],i=t[1],s=t[2],o=t[3],u=r+r,a=i+i,f=s+s,l=r*u,c=r*a,h=r*f,p=i*a,d=i*f,v=s*f,m=o*u,g=o*a,y=o*f;return e[0]=1-(p+v),e[1]=c+y,e[2]=h-g,e[3]=0,e[4]=c-y,e[5]=1-(l+v),e[6]=d+m,e[7]=0,e[8]=h+g,e[9]=d-m,e[10]=1-(l+p),e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e},k.fromQuat=function(e,t){var n=t[0],r=t[1],i=t[2],s=t[3],o=n+n,u=r+r,a=i+i,f=n*o,l=r*o,c=r*u,h=i*o,p=i*u,d=i*a,v=s*o,m=s*u,g=s*a;return e[0]=1-c-d,e[1]=l+g,e[2]=h-m,e[3]=0,e[4]=l-g,e[5]=1-f-d,e[6]=p+v,e[7]=0,e[8]=h+m,e[9]=p-v,e[10]=1-f-c,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},k.frustum=function(e,t,n,r,i,s,o){var u=1/(n-t),a=1/(i-r),f=1/(s-o);return e[0]=s*2*u,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=s*2*a,e[6]=0,e[7]=0,e[8]=(n+t)*u,e[9]=(i+r)*a,e[10]=(o+s)*f,e[11]=-1,e[12]=0,e[13]=0,e[14]=o*s*2*f,e[15]=0,e},k.perspective=function(e,t,n,r,i){var s=1/p(t/2),o=1/(r-i);return e[0]=s/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=s,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=(i+r)*o,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*i*r*o,e[15]=0,e},k.ortho=function(e,t,n,r,i,s,o){var u=1/(t-n),a=1/(r-i),f=1/(s-o);return e[0]=-2*u,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*a,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*f,e[11]=0,e[12]=(t+n)*u,e[13]=(i+r)*a,e[14]=(o+s)*f,e[15]=1,e},k.lookAt=function(e,t,n,r){var s,o,u,a,f,l,c,p,d,v,m=t[0],y=t[1],b=t[2],w=r[0],E=r[1],S=r[2],x=n[0],T=n[1],N=n[2];return i(m-x)<g&&i(y-T)<g&&i(b-N)<g?k.identity(e):(c=m-x,p=y-T,d=b-N,v=1/h(c*c+p*p+d*d),c*=v,p*=v,d*=v,s=E*d-S*p,o=S*c-w*d,u=w*p-E*c,v=h(s*s+o*o+u*u),v?(v=1/v,s*=v,o*=v,u*=v):(s=0,o=0,u=0),a=p*u-d*o,f=d*s-c*u,l=c*o-p*s,v=h(a*a+f*f+l*l),v?(v=1/v,a*=v,f*=v,l*=v):(a=0,f=0,l=0),e[0]=s,e[1]=a,e[2]=c,e[3]=0,e[4]=o,e[5]=f,e[6]=p,e[7]=0,e[8]=u,e[9]=l,e[10]=d,e[11]=0,e[12]=-(s*m+o*y+u*b),e[13]=-(a*m+f*y+l*b),e[14]=-(c*m+p*y+d*b),e[15]=1,e)},k.str=function(e){return"mat4("+e[0]+n+e[1]+n+e[2]+n+e[3]+n+e[4]+n+e[5]+n+e[6]+n+e[7]+n+e[8]+n+e[9]+n+e[10]+n+e[11]+n+e[12]+n+e[13]+n+e[14]+n+e[15]+")"},k.frob=function(e){return h(m(e[0])+m(e[1])+m(e[2])+m(e[3])+m(e[4])+m(e[5])+m(e[6])+m(e[7])+m(e[8])+m(e[9])+m(e[10])+m(e[11])+m(e[12])+m(e[13])+m(e[14])+m(e[15]))},typeof e!==t&&(e.mat4=k);var L={};L.create=function(){var e=new y(4);return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e},L.rotationTo=function(){var e=S.create(),t=S.fromValues(1,0,0),n=S.fromValues(0,1,0);return function(r,i,s){var o=S.dot(i,s);return o<-0.999999?(S.cross(e,t,i),S.length(e)<1e-6&&S.cross(e,n,i),S.normalize(e,e),L.setAxisAngle(r,e,f),r):o>.999999?(r[0]=0,r[1]=0,r[2]=0,r[3]=1,r):(S.cross(e,i,s),r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=1+o,L.normalize(r,r))}}(),L.setAxes=function(){var e=C.create();return function(t,n,r,i){return e[0]=r[0],e[3]=r[1],e[6]=r[2],e[1]=i[0],e[4]=i[1],e[7]=i[2],e[2]=-n[0],e[5]=-n[1],e[8]=-n[2],L.normalize(t,L.fromMat3(t,e))}}(),L.clone=x.clone,L.fromValues=x.fromValues,L.copy=x.copy,L.set=x.set,L.identity=function(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e},L.setAxisAngle=function(e,t,n){n*=.5;var r=c(n);return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=o(n),e},L.add=x.add,L.multiply=function(e,t,n){var r=t[0],i=t[1],s=t[2],o=t[3],u=n[0],a=n[1],f=n[2],l=n[3];return e[0]=r*l+o*u+i*f-s*a,e[1]=i*l+o*a+s*u-r*f,e[2]=s*l+o*f+r*a-i*u,e[3]=o*l-r*u-i*a-s*f,e},L.mul=L.multiply,L.scale=x.scale,L.rotateX=function(e,t,n){n*=.5;var r=t[0],i=t[1],s=t[2],u=t[3],a=c(n),f=o(n);return e[0]=r*f+u*a,e[1]=i*f+s*a,e[2]=s*f-i*a,e[3]=u*f-r*a,e},L.rotateY=function(e,t,n){n*=.5;var r=t[0],i=t[1],s=t[2],u=t[3],a=c(n),f=o(n);return e[0]=r*f-s*a,e[1]=i*f+u*a,e[2]=s*f+r*a,e[3]=u*f-i*a,e},L.rotateZ=function(e,t,n){n*=.5;var r=t[0],i=t[1],s=t[2],u=t[3],a=c(n),f=o(n);return e[0]=r*f+i*a,e[1]=i*f-r*a,e[2]=s*f+u*a,e[3]=u*f-s*a,e},L.calculateW=function(e,t){var n=t[0],r=t[1],s=t[2];return e[0]=n,e[1]=r,e[2]=s,e[3]=-h(i(1-n*n-r*r-s*s)),e},L.dot=x.dot,L.lerp=x.lerp,L.slerp=function(e,t,n,r){var i=t[0],o=t[1],u=t[2],a=t[3],f=n[0],l=n[1],h=n[2],p=n[3],d,v,m,g,y;return v=i*f+o*l+u*h+a*p,v<0&&(v=-v,f=-f,l=-l,h=-h,p=-p),1-v>1e-6?(d=s(v),m=c(d),g=c((1-r)*d)/m,y=c(r*d)/m):(g=1-r,y=r),e[0]=g*i+y*f,e[1]=g*o+y*l,e[2]=g*u+y*h,e[3]=g*a+y*p,e},L.invert=function(e,t){var n=t[0],r=t[1],i=t[2],s=t[3],o=n*n+r*r+i*i+s*s,u=o?1/o:0;return e[0]=-n*u,e[1]=-r*u,e[2]=-i*u,e[3]=s*u,e},L.conjugate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e},L.length=x.length,L.len=L.length,L.squaredLength=x.squaredLength,L.sqrLen=L.squaredLength,L.normalize=x.normalize,L.fromMat3=function(e,t){var n=t[0]+t[4]+t[8],r;if(n>0)r=h(n+1),e[3]=.5*r,r=.5/r,e[0]=(t[5]-t[7])*r,e[1]=(t[6]-t[2])*r,e[2]=(t[1]-t[3])*r;else{var i=0;t[4]>t[0]&&(i=1),t[8]>t[i*3+i]&&(i=2);var s=(i+1)%3,o=(i+2)%3;r=h(t[i*3+i]-t[s*3+s]-t[o*3+o]+1),e[i]=.5*r,r=.5/r,e[3]=(t[s*3+o]-t[o*3+s])*r,e[s]=(t[s*3+i]+t[i*3+s])*r,e[o]=(t[o*3+i]+t[i*3+o])*r}return e},L.str=function(e){return"quat("+e[0]+n+e[1]+n+e[2]+n+e[3]+")"},typeof e!==t&&(e.quat=L)}(t.exports)})(this);
